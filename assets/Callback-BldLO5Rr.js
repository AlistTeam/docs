import{a as g}from"./index-CmmzNXUp.js";import{d as w,r as C,b as r,u as e,o as a,e as n,h as d,t as u,g as b,f as x,N as f,i as P,a0 as S}from"./app-Dr385GFQ.js";import{N as m}from"./Alert-C2hF9rwd.js";import{N as T}from"./Input-B0IhrA8Q.js";import{_ as V}from"./plugin-vue_export-helper-DlAUqK2U.js";const j=w({__name:"Callback",setup(z){const o=new URL(window.location.href),c=o.searchParams.get("code"),i=o.searchParams.get("error"),y=o.searchParams.get("error_description"),k=o.searchParams.get("state")||"Ojo=",[h,v]=window.atob(k).split("::"),t=C();return c&&!i&&(async()=>{const s=await(await fetch(g()+"/alist/ali_open/code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:c,grant_type:"authorization_code",client_id:h,client_secret:v})})).json();t.value=s})(),(N,s)=>!e(c)||e(i)?(a(),r(e(m),{key:0,title:e(i)||"Error",type:"error"},{default:n(()=>[d(u(e(y)),1)]),_:1},8,["title"])):(a(),r(e(f),{key:1,vertical:"",size:"large"},{default:n(()=>{var l,p,_;return[(l=t.value)!=null&&l.error||(p=t.value)!=null&&p.error?(a(),r(e(m),{key:0,title:(_=t.value)==null?void 0:_.error,type:"error"},{default:n(()=>[d(u(t.value.error),1)]),_:1},8,["title"])):b("",!0),x(e(f),{vertical:""},{default:n(()=>[s[0]||(s[0]=P("b",null,"refresh_token:",-1)),t.value?(a(),r(e(T),{key:1,type:"textarea",autosize:"",readonly:"",value:t.value.refresh_token},null,8,["value"])):(a(),r(e(S),{key:0}))]),_:1,__:[0]})]}),_:1}))}}),J=V(j,[["__scopeId","data-v-5c4a4ac9"]]);export{J as C};
